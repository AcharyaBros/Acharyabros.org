<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Four Corners Game</title>
    <!-- Essential Libraries to run Game Lab code -->
    <script src="cdnjs.cloudflare.com"></script>
    <script src="p5play.org"></script>
</head>
<body style="margin:0; display:flex; justify-content:center; align-items:center; height:100vh; background:#333;">
    <script>
    // --- YOUR GAME CODE STARTS HERE ---
    var playerX = 200;
    var playerY = 200;
    var score = 0;
    var myTimer = 300; 
    var badCorner = Math.floor(Math.random() * 4) + 1; // Standard JS version of randomNumber
    var scoreCounted = false;

    function setup() {
        createCanvas(400, 400); // Standard Game Lab canvas size
    }

    function draw() {
        // 2. Draw Map
        fill("red"); rect(0, 0, 200, 200);
        fill("blue"); rect(200, 0, 200, 200);
        fill("yellow"); rect(0, 200, 200, 200);
        fill("green"); rect(200, 200, 200, 200);

        // 3. Game Logic Phase
        if (myTimer > 0) {
            myTimer = myTimer - 1;

            // Movement using p5.js key detection
            if (keyIsDown(RIGHT_ARROW)) { playerX += 5; }
            if (keyIsDown(LEFT_ARROW)) { playerX -= 5; }
            if (keyIsDown(UP_ARROW)) { playerY -= 5; }
            if (keyIsDown(DOWN_ARROW)) { playerY += 5; }

            // Screen Boundaries
            playerX = constrain(playerX, 15, 385);
            playerY = constrain(playerY, 15, 385);

            // Timer Display
            fill("black");
            textSize(40);
            text(Math.ceil(myTimer / 30), 185, 50);

        } else {
            // 4. WIN/LOSS CHECK
            var playerCorner = 0;
            if (playerX === 200 || playerY === 200) {
                fill("black");
                textSize(40);
                text("ON THE LINE!", 90, 160);
                text("YOU LOSE!", 100, 210);
                score = 0;
            } else {
                if (playerX < 200 && playerY < 200) { playerCorner = 1; }
                else if (playerX > 200 && playerY < 200) { playerCorner = 2; }
                else if (playerX < 200 && playerY > 200) { playerCorner = 3; }
                else { playerCorner = 4; }

                textSize(45);
                if (playerCorner == badCorner) {
                    fill("black");
                    text("YOU LOSE!", 90, 210);
                    score = 0;
                } else {
                    fill("white");
                    text("SAFE!", 140, 210);
                    if (!scoreCounted) {
                        score++;
                        scoreCounted = true;
                    }
                }
            }

            // 5. REPLAY BUTTON
            fill("white");
            textSize(20);
            text("Press 'R' for Next Round", 90, 320);
            if (keyIsDown(82)) { // '82' is the key code for 'R'
                playerX = 200;
                playerY = 200;
                myTimer = 300;
                badCorner = Math.floor(Math.random() * 4) + 1;
                scoreCounted = false;
            }
        }

        // 6. Draw Player and Score
        fill("black");
        ellipse(playerX, playerY, 30, 30);
        fill("black");
        textSize(20);
        text("Score: " + score, 15, 30);
    }
    // --- YOUR GAME CODE ENDS HERE ---
    </script>
</body>
</html>
